{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\salty\\\\Documents\\\\GitHub\\\\Collector\\\\src\\\\components\\\\CreateListing.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { Form, Button, Card, Alert } from \"react-bootstrap\";\nimport { useAuth } from '../contexts/AuthContext';\nimport { Link, useHistory } from \"react-router-dom\";\nimport { storage, db } from '../firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function CreateListing() {\n  _s();\n\n  const [itemNameRef, setItemNameRef] = React.useState(\"\");\n  const [itemPriceRef, setItemPriceRef] = React.useState(\"\");\n  const [itemCategoryRef, setItemCategoryRef] = React.useState(\"\");\n  const [listingTypeRef, setListingTypeRef] = React.useState(\"\");\n  const [image, setImage] = React.useState(null);\n  const [progress, setProgress] = React.useState(0);\n  const [url, setUrl] = React.useState(\"\");\n  const currentUser = useAuth();\n  const [error, setError] = useState('');\n  const loading = false;\n  const history = useHistory();\n  var date = Date().toLocaleString();\n\n  if (!currentUser) {\n    history.push('/login');\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    try {\n      addListing();\n    } catch {\n      console.log(itemNameRef);\n      console.log(parsedPrice);\n      console.log(itemCategoryRef);\n      console.log(listingTypeRef);\n      console.log(currentUser.displayName);\n      console.log(currentUser.uid);\n      setError('Failed to list item');\n    }\n  }\n\n  const handleChangeItemName = e => {\n    setItemNameRef(e.target.value);\n  };\n\n  const handleChangeItemPrice = e => {\n    setItemPriceRef(e.target.value);\n  };\n\n  const handleChangeItemCategory = e => {\n    setItemCategoryRef(e.target.value);\n  };\n\n  const handleChangeListingType = e => {\n    setListingTypeRef(e.target.value);\n  };\n\n  const handleFile = e => {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  };\n\n  console.log(\"image: \", image);\n\n  const handleUpload = () => {\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\n    uploadTask.on(\"state_changed\", snapshot => {\n      const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n      setProgress(progress);\n    }, error => {\n      console.log(error);\n      alert(error);\n    }, () => {\n      storage.ref(\"images\").child(image.name).getDownloadURL().then(urlImg => {\n        setUrl(urlImg);\n        console.log(urlImg);\n      });\n    });\n  };\n\n  const parsedPrice = parseFloat(itemPriceRef);\n\n  async function addListing() {\n    await db.listings.add({\n      itemName: itemNameRef,\n      itemPrice: parsedPrice,\n      itemCategory: itemCategoryRef,\n      listingType: listingTypeRef,\n      owner: currentUser.displayName,\n      uid: currentUser.uid,\n      status: \"on-sale\",\n      saleDate: date,\n      url: url\n    });\n  }\n  /*Created a dummy \"create listing\" page. We are now capable of posting listings to our website.*/\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      children: /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-center mb-4\",\n          children: \"Sell Something!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"danger\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            id: \"Name\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Item Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              value: itemNameRef,\n              onChange: handleChangeItemName,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            id: \"Price\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Price (USD)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              value: itemPriceRef,\n              onChange: handleChangeItemPrice,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            id: \"Category\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              value: itemCategoryRef,\n              onChange: handleChangeItemCategory,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            id: \"Listing Type\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Listing Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              value: listingTypeRef,\n              onChange: handleChangeListingType,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"progress\", {\n            value: progress,\n            max: \"100\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            onChange: handleFile\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            disabled: loading,\n            className: \"w-100\",\n            onClick: handleUpload,\n            type: \"submit\",\n            children: \"Create Listing\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-100 text-center mt-2\",\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: \" Back to dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(CreateListing, \"uAtQfz4VzNzHMmNuI2N6B5yhQTk=\", false, function () {\n  return [useAuth, useHistory];\n});\n\n_c = CreateListing;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateListing\");","map":{"version":3,"sources":["C:/Users/salty/Documents/GitHub/Collector/src/components/CreateListing.js"],"names":["React","useState","Form","Button","Card","Alert","useAuth","Link","useHistory","storage","db","CreateListing","itemNameRef","setItemNameRef","itemPriceRef","setItemPriceRef","itemCategoryRef","setItemCategoryRef","listingTypeRef","setListingTypeRef","image","setImage","progress","setProgress","url","setUrl","currentUser","error","setError","loading","history","date","Date","toLocaleString","push","handleSubmit","e","preventDefault","addListing","console","log","parsedPrice","displayName","uid","handleChangeItemName","target","value","handleChangeItemPrice","handleChangeItemCategory","handleChangeListingType","handleFile","files","handleUpload","uploadTask","ref","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","alert","child","getDownloadURL","then","urlImg","parseFloat","listings","add","itemName","itemPrice","itemCategory","listingType","owner","status","saleDate"],"mappings":"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","sourcesContent":["import React , {useState} from \"react\"\r\nimport { Form,Button,Card,Alert} from \"react-bootstrap\"\r\nimport {useAuth} from '../contexts/AuthContext'\r\nimport {Link,useHistory} from \"react-router-dom\"\r\nimport {storage, db} from '../firebase'\r\n\r\nexport default function CreateListing() {\r\n    const [itemNameRef,setItemNameRef]=React.useState(\"\")\r\n    const [itemPriceRef,setItemPriceRef]=React.useState(\"\")\r\n    const [itemCategoryRef,setItemCategoryRef]=React.useState(\"\")\r\n    const [listingTypeRef,setListingTypeRef]=React.useState(\"\")\r\n    const [image, setImage] = React.useState(null)\r\n    const [progress, setProgress] = React.useState(0)\r\n    const [url, setUrl] = React.useState(\"\")\r\n    const currentUser = useAuth()\r\n    const [error,setError]=useState('')\r\n    const loading=false\r\n    const history=useHistory()\r\n    var date = Date().toLocaleString()\r\n\r\n    \r\n    if(!currentUser)\r\n    {\r\n        history.push('/login')\r\n    }\r\n    function handleSubmit(e){\r\n        e.preventDefault()\r\n        try{\r\n            addListing()\r\n        }catch{\r\n            console.log(itemNameRef)\r\n            console.log(parsedPrice)\r\n            console.log(itemCategoryRef)\r\n            console.log(listingTypeRef)\r\n            console.log(currentUser.displayName)\r\n            console.log(currentUser.uid)\r\n            setError('Failed to list item')\r\n        }\r\n    }\r\n\r\n    const handleChangeItemName = (e) => {\r\n        setItemNameRef(e.target.value)\r\n    }\r\n\r\n    const handleChangeItemPrice = (e) => {\r\n        setItemPriceRef(e.target.value)\r\n    }\r\n    const handleChangeItemCategory = (e) => {\r\n        setItemCategoryRef(e.target.value)\r\n    }\r\n    const handleChangeListingType = (e) => {\r\n        setListingTypeRef(e.target.value)\r\n    }\r\n\r\n    const handleFile = (e) => {\r\n        if (e.target.files[0]) {\r\n            setImage(e.target.files[0])\r\n        }\r\n        \r\n    }\r\n    console.log(\"image: \", image)\r\n\r\n    const handleUpload = () => {\r\n        const uploadTask = storage.ref(`images/${image.name}`).put(image);\r\n        uploadTask.on(\r\n            \"state_changed\",\r\n            snapshot => {\r\n                const progress = Math.round(\r\n                    (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n                );\r\n                setProgress(progress); \r\n            },\r\n            error => {\r\n                console.log(error);\r\n                alert(error);\r\n            },\r\n            () => {\r\n                storage\r\n                    .ref(\"images\")\r\n                    .child(image.name)\r\n                    .getDownloadURL()\r\n                    .then(urlImg => {\r\n                        setUrl(urlImg)\r\n                        console.log(urlImg)\r\n                    })\r\n            }\r\n        )\r\n    }\r\n    \r\n\r\n    const parsedPrice=parseFloat(itemPriceRef)\r\n    async function addListing(){\r\n       await db.listings.add({\r\n            itemName: itemNameRef,\r\n            itemPrice: parsedPrice,\r\n            itemCategory: itemCategoryRef,\r\n            listingType: listingTypeRef,\r\n            owner: currentUser.displayName,\r\n            uid: currentUser.uid,\r\n            status: \"on-sale\",\r\n            saleDate: date,\r\n            url: url\r\n        })\r\n    }\r\n    /*Created a dummy \"create listing\" page. We are now capable of posting listings to our website.*/\r\n    return (\r\n        <>\r\n        <Card>\r\n                <Card.Body>\r\n                <h2 className=\"text-center mb-4\">Sell Something!</h2>  \r\n                {error && <Alert variant=\"danger\">{error}</Alert>}\r\n                <Form onSubmit={handleSubmit}>\r\n                    <Form.Group id=\"Name\">\r\n                        <Form.Label>Item Name</Form.Label>\r\n                        <Form.Control value={itemNameRef} onChange={handleChangeItemName} required/>\r\n                    </Form.Group>\r\n                    <Form.Group id=\"Price\">\r\n                        <Form.Label>Price (USD)</Form.Label>\r\n                        <Form.Control value={itemPriceRef} onChange={handleChangeItemPrice} required/>\r\n                    </Form.Group>\r\n                    <Form.Group id=\"Category\">\r\n                        <Form.Label>Category</Form.Label>\r\n                        <Form.Control value={itemCategoryRef} onChange={handleChangeItemCategory} required/>\r\n                    </Form.Group>\r\n                    <Form.Group id=\"Listing Type\">\r\n                        <Form.Label>Listing Type</Form.Label>\r\n                        <Form.Control value={listingTypeRef} onChange={handleChangeListingType} required/>\r\n                    </Form.Group>\r\n                    <progress value={progress} max=\"100\"/>\r\n                    <input type=\"file\" onChange={handleFile} />\r\n                    {/* <Button disabled={loading} className=\"w-100\" onClick={handleUpload}>Upload Image</Button> */}\r\n                    <Button disabled={loading} className=\"w-100\" onClick={handleUpload} type=\"submit\">Create Listing</Button>\r\n                </Form>\r\n                </Card.Body>\r\n            </Card>\r\n        <div className=\"w-100 text-center mt-2\">\r\n                    <Link to=\"/\"> Back to dashboard</Link>\r\n        </div>\r\n        </>\r\n    )\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}